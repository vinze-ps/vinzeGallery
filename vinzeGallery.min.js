/* vinzeGallery v1.0 */
/* created by Patryk Surmacz */
/* github.com/vinze-ps */

const vinzeGallery={init:function(t={}){timeoutCustom("set","vg-slider-load",1,()=>{const e={mobileWidthBreakpoint:500,gallery:{data:"data-vinze-gallery",smoothLoad:!0,smoothLoadSpeed:50,photosContainerData:"data-vinze-photo-container",photosData:"data-vinze-photo",photosTransitionDuration:300,photosEasing:"easeOutSine",photosGap:!1,photosHover:"zoomIn",layout:{xl:!1,lg:3,md:4,sm:!1,xs:6}},slider:{data:"data-vinze-slider",transitionDuration:300,navButtons:"desktop",escButton:!0,navTouch:!0,closeViaDrag:!0,mouseWheel:"zoom",photosIndicator:"desktop",photosEasing:"easeOutSine",photosGap:15,photosTransitionDuration:300,zoomTransitionDuration:200,zoomMaxScale:3,zoomSpeed:.25,loop:!0,draggingXBreakpoint:15,draggingYBreakpoint:15}},s={linear:"cubic-bezier(0, 0, 1, 1)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)",easeIn:"cubic-bezier(0.42, 0, 1, 1)",easeOut:"cubic-bezier(0, 0, 0.58, 1)",easeInOut:"cubic-bezier(0.42, 0, 0.58, 1)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"};let o=objectAssign(Object.create({}),JSON.parse(JSON.stringify(e)),t);class i{constructor(t){this.galleryId=t,this.selector=`[${o.gallery.data}]:eq(${this.galleryId})`,this.photosSelector=`${this.selector} [${o.gallery.photosData}]`,this.photosContainerSelector=`${this.selector} [${o.gallery.photosContainerData}]`}loadPhotos(){u(this.photosSelector).css({transition:`transform ${o.gallery.photosTransitionDuration}ms`});for(let t=0;t<=u(this.photosSelector).length-1;t++){if(void 0!==s[o.gallery.photosEasing]?u(`${this.photosSelector}`).css({transitionTimingFunction:`${s[o.gallery.photosEasing]}`}):u(`${this.photosSelector}`).css({transitionTimingFunction:`${s.ease}`}),0!=o.gallery.photosGap){let t="",e="";switch(typeof o.gallery.photosGap){case"number":t=`${o.gallery.photosGap}px 0`,e=`0 ${o.gallery.photosGap}px`;break;case"string":t=`${o.gallery.photosGap} 0`,e=`0 ${o.gallery.photosGap}`;break;default:return}u(`${this.photosContainerSelector}`).css({margin:t}),u(`${this.photosContainerSelector}`).css({padding:e})}null===u(this.photosSelector).eq(t).el[0].parentElement.getAttribute(o.gallery.data)&&(u(this.photosSelector).eq(t).el[0].parentElement.style.overflow="hidden"),u(this.photosSelector).eq(t).attr("alt")||u(this.photosSelector).eq(t).attr("alt"," "),u(this.photosSelector).eq(t).on("click",()=>{null!==h&&h.close(),(h=new a).open(t,this.galleryId)}),o.gallery.smoothLoad?(u(this.photosSelector).eq(t).css({transition:`all ${o.gallery.photosTransitionDuration}ms`}),timeoutCustom("set","vg-gallery-photos-load",t*o.gallery.smoothLoadSpeed,()=>{u(this.photosSelector).eq(t).addClass("loaded")})):u(this.photosSelector).eq(t).addClass("loaded")}}setAttribute(t,e,s,o){e&&s?u(this.selector).attr(t,s):!e&&o&&u(this.selector).attr(t,o)}setLayout(){if(o.gallery.layout){u(this.selector).addClass("row");for(let t=0;t<=u(this.photosContainerSelector).length-1;t++){let e=u(this.photosContainerSelector).eq(t).hasClass();for(let t=e.length-1;t>=0;t--)-1===e[t].search("col-")&&e.splice(t,1);for(let s in o.gallery.layout){let i=!0;for(let t=e.length-1;t>=0;t--)-1!==e[t].search(s)&&(i=!1),"xs"===s&&-1===e[t].search("sm")&&-1===e[t].search("md")&&-1===e[t].search("lg")&&-1===e[t].search("xl")&&(i=!1);i&&"number"==typeof o.gallery.layout[s]&&u(this.photosContainerSelector).eq(t).addClass(`col${"xs"!==s.toString()?"-"+s.toString():""}-${o.gallery.layout[s]}`)}}}}}class a{constructor(){this.state={changing:!1,zoom:!1,touching:!1,draggingY:!1,draggingX:!1,previousTranslateX:0,previousTranslateY:0,translateX:0,translateY:0,scale:1,startDirectionDraggingY:!1,previousDoubleTouchDistance:0,startInsideTop:!0,startInsideRight:!0,startInsideBottom:!0,startInsideLeft:!0}}setDefaultProperties(){this.properties=Object.assign({},o.slider),this.properties.photosTransitionDuration>600&&(this.properties.photosTransitionDuration=600),this.properties.transitionDuration>600&&(this.properties.transitionDuration=600),this.properties.photosGap>300&&(this.properties.photosGap=300),this.properties.zoomTransitionDuration>600&&(this.properties.zoomTransitionDuration=600),this.properties.zoomSpeed<.1&&(this.properties.zoomSpeed=.1);let t=u(window).width()<=o.mobileWidthBreakpoint,e=u(window).width()>o.mobileWidthBreakpoint,s=this.properties.photosIndicator,i=this.properties.navButtons,a=this.properties.navTouch,r=this.properties.escButton,h=this.properties.closeViaDrag,n=this.properties.loop;"boolean"!=typeof s&&(this.properties.photosIndicator=!!("mobile"===s&&t||"desktop"===s&&e)),"boolean"!=typeof i&&(this.properties.navButtons=!!("mobile"===i&&t||"desktop"===i&&e)),"boolean"!=typeof a&&(this.properties.navTouch=!!("mobile"===a&&t||"desktop"===a&&e)),"boolean"!=typeof r&&(this.properties.escButton=!!("mobile"===r&&t||"desktop"===r&&e)),"boolean"!=typeof h&&(this.properties.closeViaDrag=!!("mobile"===h&&t||"desktop"===h&&e)),"boolean"!=typeof n&&(this.properties.loop=!!("mobile"===n&&t||"desktop"===n&&e))}generatePhotos(){let t=new Array;for(let e=0;e<=u(this.galleryPhotos).length-1;e++)"string"!=typeof u(this.galleryPhotos+`:eq(${e})`).attr("data-vinze-slider-src")?t.push(u(this.galleryPhotos+`:eq(${e})`).attr("src")):t.push(u(this.galleryPhotos+`:eq(${e})`).attr("data-vinze-slider-src"));for(let e=0;e<=t.length-1;e++){if(u(this.selector).append(`<div ${o.gallery.photosData}=${e} class="${e===this.galleryPhotoId?"active":""}"><div data-vinze-photo-cover></div><img src="${t[e]}" alt=" " draggable="false" /></div>`),this.properties.navTouch){u(this.photoSelector(e)).on("dblclick",t=>{this.state.changing||this.zoom(e).once(),t.preventDefault()});let t=!1;u(`${this.photoSelector(e)}`).on("mousedown touchstart",s=>{void 0!==s.touches&&(!1===t?(t=e,timeoutCustom("set","vg-double-tap",300,()=>{t=!1})):t===e&&void 0===s.touches[1]&&(timeoutCustom("clear","vg-double-tap"),t=!1,this.state.changing||this.zoom(e).once())),this.state.changing||this.touch().start(e,s),s.preventDefault()}).addClass("touchable"),u(window).on("mouseup touchend",()=>{this.touch().end()})}"zoom"===this.properties.mouseWheel&&u(this.photoSelector(e)).on("mousewheel",t=>{this.state.changing||(t.wheelDelta/120>0?this.zoom(e).scroll("zoom"):this.zoom(e).scroll("unzoom"))})}this.photosLength=u(this.photosSelector).length,this.loop=this.properties.loop&&u(this.photosSelector).length>2,u(this.photoSelector(this.galleryPhotoId-1)).length>0?u(this.photoSelector(this.galleryPhotoId-1)).addClass("previous"):this.loop&&this.galleryPhotoId!==this.photosLength-1&&u(this.photoSelector(this.photosLength-1)).addClass("previous"),u(this.photoSelector(this.galleryPhotoId+1)).length>0?u(this.photoSelector(this.galleryPhotoId+1)).addClass("next"):this.loop&&0!==this.galleryPhotoId&&u(this.photoSelector(0)).addClass("next"),u(`${this.photosSelector}.previous, ${this.photosSelector}.active, ${this.photosSelector}.next, ${this.photosSelector}.previous > img, ${this.photosSelector}.active > img, ${this.photosSelector}.next > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`}),void 0!==s[this.properties.photosEasing]?u(`${this.photosSelector}, ${this.photosSelector} > img`).css({transitionTimingFunction:`${s[this.properties.photosEasing]}`}):u(`${this.photosSelector}, ${this.photosSelector} > img`).css({transitionTimingFunction:`${s.ease}`})}photo(t){let e=void 0===t?u(`${this.photosSelector}.active > img`):u(`${this.photoSelector(t)} > img`);return{setTransform:(e=[void 0])=>{"number"===t&&(t=[t]);for(let s=0;s<=t.length-1;s++){if(0===u(this.photoSelector(t[s])).length)continue;const o={scale:this.state.scale,translateX:this.state.translateX,translateY:this.state.translateY},i=Object.assign({},o,e[s]);let a=-1;a=!1===t||void 0===t||!1===t[s]||void 0===t[s]?u(`${this.photosSelector} > img`):u(`${this.photoSelector(t[s])} > img`);let r=[void 0!==e[s]&&void 0!==e[s].scale?i.scale:o.scale,void 0!==e[s]&&void 0!==e[s].translateX?i.translateX:o.translateX,void 0!==e[s]&&void 0!==e[s].translateY?i.translateY:o.translateY];a.css({transform:`scale(${r[0]}) translateX(${r[1]}px) translateY(${r[2]}px)`}),u(`${this.photoSelector(t[s])}`).hasClass("active")&&(void 0!==e[s]&&void 0!==e[s].scale&&(this.state.scale=i.scale),void 0!==e[s]&&void 0!==e[s].translateX&&(this.state.translateX=i.translateX),void 0!==e[s]&&void 0!==e[s].translateY&&(this.state.translateY=i.translateY))}},minScale:()=>{let t=u(window).width(),s=u(window).height(),o=e.outerWidth(),i=e.outerHeight();return s-i>t-o?s/i+s/i*.01:t/o+t/o*.01},insideWindow:(t,s=!1)=>{let o=0;switch(t){case"left":return o=e.position().left/this.state.scale,s?o:o>0;case"right":return o=e.position().left+e.outerWidth()*this.state.scale,s?o-u(window).width():o<u(window).width();case"top":return o=e.position().top/this.state.scale,s?o:o>0;case"bottom":return o=e.position().top+e.outerHeight()*this.state.scale,s?o-u(window).height():o<u(window).height();default:return}},fixPosition:()=>{let e=this.photo([t]).insideWindow("left"),s=this.photo([t]).insideWindow("right"),o=this.photo([t]).insideWindow("top"),i=this.photo([t]).insideWindow("bottom");if((e||s)&&u(`${this.photoSelector(t)} > img`).outerWidth()*this.state.scale>=u(window).width()){let e=u(`${this.photoSelector(t)} > img`).position().left/this.state.scale;s&&(e+=u(`${this.photoSelector(t)} > img`).outerWidth()-u(window).width()/this.state.scale);let o=u(window).width()/5<=150?u(window).width()/5:150;e>o&&this.state.startInsideLeft>-10?this.change(t).backward():e<-1*o&&this.state.startInsideRight<10&&this.change(t).forward(),this.state.changing||this.photo([t]).setTransform([{translateX:this.state.translateX-e}])}else!e&&!s||u(`${this.photoSelector(t)} > img`).outerWidth()*this.state.scale>=u(window).width()||this.state.changing||this.photo([t]).setTransform([{translateX:0}]);if((o||i)&&u(`${this.photoSelector(t)} > img`).outerHeight()*this.state.scale>=u(window).height()){let e=u(`${this.photoSelector(t)} > img`).position().top/this.state.scale;i&&(e+=u(`${this.photoSelector(t)} > img`).outerHeight()-u(window).height()/this.state.scale),this.state.changing||this.photo([t]).setTransform([{translateY:this.state.translateY-e}])}else!o&&!i||u(`${this.photoSelector(t)} > img`).outerHeight()*this.state.scale>=u(window).height()||this.state.changing||this.photo([t]).setTransform([{translateY:0}])}}}open(t,e){this.setDefaultProperties(),this.galleryId=e,this.galleryPhotoId=t,this.galleryPhotos=`[${o.gallery.data}]:eq(${this.galleryId}) [${o.gallery.photosData}]`,this.selector=`[${this.properties.data}]`,this.photoSelector=(t=>`[${this.properties.data}] [${o.gallery.photosData}="${t}"]`),this.photosSelector=`[${this.properties.data}] [${o.gallery.photosData}]`,u("body").prepend(`<div ${this.properties.data}>${!0===this.properties.escButton?'<button class="close" title="close(esc)"><div class="bar"></div><div class="bar"></div></button>':""}${!0===this.properties.navButtons?'<button class="backward" title="previous"></button><button class="forward" title="next"></button>':""}${!0===this.properties.photosIndicator?"<div data-vinze-photo-indicator>"+(this.galleryPhotoId+1)+" of "+u(this.galleryPhotos).length+"</div>":""}</div></div>`),u(this.selector).addClass("blur"),u(this.selector).css({transitionDuration:`${this.properties.transitionDuration}ms`}),this.generatePhotos(),this.loop||(0===u(this.photoSelector(this.galleryPhotoId+1)).length?u("button.forward").addClass("disable"):u("button.forward").removeClass("disable"),0===u(this.photoSelector(this.galleryPhotoId-1)).length?u("button.backward").addClass("disable"):u("button.backward").removeClass("disable")),!0===this.properties.navButtons&&(u(`${this.selector} > button.forward`).on("click",()=>{this.state.changing||this.change().forward()}),u(`${this.selector} > button.backward`).on("click",()=>{this.state.changing||this.change().backward()})),"navigation"===this.properties.mouseWheel&&u(this.selector).on("mousewheel",t=>{t.wheelDelta/120>0?this.state.changing||this.change().forward():this.state.changing||this.change().backward()}),!0===this.properties.escButton&&u(`${this.selector} > button.close`).on("click",()=>{this.close()}),document.onkeydown=(t=>{("key"in(t=t||window.event)?"Escape"===t.key||"Esc"===t.key:27===t.keyCode)&&this.close()}),timeoutCustom("set","vg-slider-load",1,()=>{u("body").addClass("overflow-hidden"),u(this.selector).addClass("active")}),this.currentWindowWidth=u(window).width(),u(window).on("resize",()=>{const t=()=>{this.currentWindowWidth=u(window).width(),this.setDefaultProperties(),this.close(),timeoutCustom("clear","vg-slider-reload"),timeoutCustom("set","vg-slider-reload",this.properties.transitionDuration,()=>{this.open(this.galleryPhotoId,this.galleryId)})};this.currentWindowWidth>=o.mobileWidthBreakpoint?u(window).width()<=o.mobileWidthBreakpoint&&t():u(window).width()>=o.mobileWidthBreakpoint&&t()})}close(){u(window).off("resize"),this.properties.navTouch&&(u(this.photosSelector).off("mousedown touchstart dblclick"),u(window).off("mouseup touchend touchmove mousemove")),!0===this.properties.navButtons&&u(`${this.selector} > button.forward, ${this.selector} > button.backward`).off("click"),document.onkeydown=null,!0===this.properties.escButton&&u(`${this.selector} > button.close`).off("click"),this.properties.mouseWheel&&(u(this.selector).off("mousewheel"),u(this.photosSelector).off("mousewheel")),u(this.selector).removeClass("active"),timeoutCustom("set","vg-slider-load",this.properties.transitionDuration,()=>{u("body").removeClass("overflow-hidden"),u(this.selector).remove()}),h=null}change(t){t=parseInt(t,10)||parseInt(u(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10);let e=0;const s=(t,e,s)=>{u(this.photoSelector(e)).length>0&&(this.state.zoom=!1,this.state.previousTranslateX=0,this.state.previousTranslateY=0,this.state.changing=!0,timeoutCustom("set","vg-slide-changing",this.properties.photosTransitionDuration,()=>{this.state.changing=!1,u(`${this.photosSelector}.previous, ${this.photosSelector}.active, ${this.photosSelector}.next, ${this.photosSelector}.previous > img, ${this.photosSelector}.active > img, ${this.photosSelector}.next > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`})}),u(`${this.photosSelector}.previous, ${this.photosSelector}.active, ${this.photosSelector}.next, ${this.photosSelector}.previous > img, ${this.photosSelector}.active > img, ${this.photosSelector}.next > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`}),"forward"===s&&(u(`${this.photosSelector}.previous`).css({transitionDuration:"0ms"}),u(this.photoSelector(t)).addClass("previous").removeClass("active"),u(this.photoSelector(e)).addClass("active").removeClass("next"),u(this.photoSelector(t-1)).length>0?u(this.photoSelector(t-1)).removeClass("previous"):u(this.photoSelector(this.photosLength-1)).removeClass("previous"),u(this.photoSelector(e+1)).length>0?u(this.photoSelector(e+1)).addClass("next"):this.loop&&u(this.photoSelector(0)).addClass("next"),u(`${this.photosSelector}.next > img`).css({transitionDuration:"0ms"})),"backward"===s&&(u(`${this.photosSelector}.next`).css({transitionDuration:"0ms"}),u(this.photoSelector(t)).addClass("next").removeClass("active"),u(this.photoSelector(e)).addClass("active").removeClass("previous"),u(this.photoSelector(t+1)).length>0?u(this.photoSelector(t+1)).removeClass("next"):u(this.photoSelector(0)).removeClass("next"),u(this.photoSelector(e-1)).length>0?u(this.photoSelector(e-1)).addClass("previous"):this.loop&&u(this.photoSelector(this.photosLength-1)).addClass("previous"),u(`${this.photosSelector}.previous > img`).css({transitionDuration:"0ms"})),this.photo([u(`${this.photosSelector}.active`).attr(o.gallery.photosData),u(`${this.photosSelector}.previous`).attr(o.gallery.photosData),u(`${this.photosSelector}.next`).attr(o.gallery.photosData)]).setTransform([{translateX:0,translateY:0,scale:1},{translateX:-1*this.properties.photosGap,translateY:0,scale:1},{translateX:this.properties.photosGap,translateY:0,scale:1}]),!0===this.properties.photosIndicator&&u(`${this.selector} [data-vinze-photo-indicator]`).html(`${parseInt(u(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10)+1} of ${this.photosLength}`))};return{forward:()=>{e=t+1,this.loop&&e>this.photosLength-1?e=0:!this.loop&&e>=this.photosLength-1?(u("button.forward").addClass("disable"),this.photosLength-1>0&&u("button.backward").removeClass("disable")):u("button.backward").removeClass("disable"),s(t,e,"forward")},backward:()=>{e=t-1,this.loop&&e<0?e=this.photosLength-1:!this.loop&&e-1<0?(u("button.backward").addClass("disable"),this.photosLength-1>0&&u("button.forward").removeClass("disable")):u("button.forward").removeClass("disable"),s(t,e,"backward")}}}touch(){return{start:(t,e)=>{this.state.startInsideTop=this.photo([t]).insideWindow("top",!0),this.state.startInsideRight=this.photo([t]).insideWindow("right",!0),this.state.startInsideBottom=this.photo([t]).insideWindow("bottom",!0),this.state.startInsideLeft=this.photo([t]).insideWindow("left",!0),this.state.previousTranslateX=this.state.translateX,this.state.previousTranslateY=this.state.translateY,this.state.touching=!0,u(this.selector).css({transitionDuration:"0ms"}),u(this.photoSelector(t)).addClass("touching"),u(window).on("touchmove mousemove",s=>{this.drag().start(t,e,s)}),u("button.backward, button.forward").css({pointerEvents:"none"})},end:t=>{t=t||u(`${this.photosSelector}.active`).attr(o.gallery.photosData),this.state.touching=!1,u(this.selector).css({transitionDuration:`${this.properties.transitionDuration}ms`}),u(this.photosSelector).removeClass("touching"),this.drag().end(t),u(window).off("touchmove mousemove"),u("button.backward, button.forward").css({pointerEvents:"all"})}}}drag(){return{start:(t,e,s)=>{u(`${this.photosSelector}`).addClass("dragging"),s=s||window.event;let o={x:-1,y:-1},i=e.clientX||e.touches[0].clientX,a=e.clientY||e.touches[0].clientY,r=0,h=0;if(void 0===s.touches?(o.x=s.clientX,o.y=s.clientY):(o.x=s.touches[0].clientX,o.y=s.touches[0].clientY),r=o.x-i,h=o.y-a,s.touches&&s.touches[1]){let e=s.touches[1].clientX,o=s.touches[1].clientY,r=Math.sqrt(Math.pow(e-i,2)+Math.pow(o-a,2));r=Math.round(r)/10,this.properties.zoomSpeed=Math.pow(r,2)/1e4,r>this.state.previousDoubleTouchDistance?this.zoom(t).scroll("zoom"):r<this.state.previousDoubleTouchDistance&&this.zoom(t).scroll("unzoom"),r!==this.state.previousDoubleTouchDistance&&(this.state.previousDoubleTouchDistance=r)}else{!1===this.state.draggingY&&(this.state.zoom||(Math.abs(r)>this.properties.draggingXBreakpoint&&(this.state.draggingX=!0),this.photo([t]).setTransform([{translateX:r,translateY:0}])));let e=this.photo(t).insideWindow("left"),s=this.photo(t).insideWindow("right");if((!this.state.zoom&&!1===this.state.draggingY||this.state.zoom)&&(r<=0&&s?this.state.startInsideRight<10&&(!this.loop||this.loop&&u(this.photoSelector(t+1)).length>0?this.photo([t+1]).setTransform([{translateX:this.properties.photosGap+r,translateY:0,scale:1}]):this.photo([0]).setTransform([{translateX:this.properties.photosGap+r,translateY:0,scale:1}])):r>0&&e&&this.state.startInsideLeft>-10&&(!this.loop||this.loop&&u(this.photoSelector(t-1)).length>0?this.photo([t-1]).setTransform([{translateX:-1*this.properties.photosGap+r,translateY:0,scale:1}]):this.photo([this.photosLength-1]).setTransform([{translateX:-1*this.properties.photosGap+r,translateY:0,scale:1}]))),this.state.zoom)timeoutCustom("clear","vg-fix-zoom-position"),this.state.draggingX=!0,this.state.draggingY=!0,this.photo([t]).setTransform([{translateX:r/this.state.scale+this.state.previousTranslateX,translateY:h/this.state.scale+this.state.previousTranslateY}]);else if((Math.abs(r)<=this.properties.draggingXBreakpoint&&Math.abs(h)>=this.properties.draggingYBreakpoint||!0===this.state.draggingY)&&!0===this.properties.closeViaDrag&&!1===this.state.draggingX){this.state.draggingY=!0,h<=0&&"bottom"!==this.state.startDirectionDraggingY||h>0&&"top"===this.state.startDirectionDraggingY?(h+=this.properties.draggingYBreakpoint,this.state.startDirectionDraggingY="top"):(h>0&&"top"!==this.state.startDirectionDraggingY||h<=0&&"bottom"===this.state.startDirectionDraggingY)&&(h-=this.properties.draggingYBreakpoint,this.state.startDirectionDraggingY="bottom");let e=Math.abs(h)/10;e=(e=e<=99&&e>=10?e.toString():e<10?"0"+e.toString():"99").replace(".","");let s=Math.round(1e4*(1-parseFloat("0."+e)))/1e4;u(this.selector).css({opacity:s}).removeClass("blur"),this.photo([t]).setTransform([{translateX:r,translateY:h,scale:s>=.5?s:.5}])}}},end:t=>{t=parseInt(t,10)||parseInt(u(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10),u(this.photosSelector).removeClass("dragging"),this.state.startDirectionDraggingY=!1;let e=u(window).width()/5<=150?u(window).width()/5:150,s=u(window).width()/5<=150?u(window).width()/5:150;if(this.state.zoom){if(this.state.draggingX||this.state.draggingY){let e=this.photo(t).insideWindow("left"),s=this.photo(t).insideWindow("right");this.photo([t]).fixPosition();let o=this.loop&&0===u(this.photoSelector(t+1)).length?0:t+1,i=this.loop&&0===u(this.photoSelector(t-1)).length?this.photosLength-1:t-1;this.state.changing||(s?this.photo([o]).setTransform([{translateX:this.properties.photosGap,translateY:0,scale:1}]):e&&this.photo([i]).setTransform([{translateX:-1*this.properties.photosGap,translateY:0,scale:1}]))}}else if(this.state.draggingY)this.state.translateY>s||this.state.translateY<-s?(u(this.selector).css({opacity:0}),this.photo([t]).setTransform([{scale:.5}]),this.close()):(this.state.previousTranslateY=this.state.translateY,u(this.selector).css({opacity:1}).addClass("blur"),this.photo([t]).setTransform([{translateX:0,translateY:0,scale:1}]));else if(this.state.translateX>e&&(this.loop||u(this.photoSelector(t-1)).length>0))this.state.previousTranslateX=this.state.translateX,this.change(t).backward();else if(this.state.translateX<-e&&(this.loop||u(this.photoSelector(t+1)).length>0))this.state.previousTranslateX=this.state.translateX,this.change(t).forward();else{this.state.previousTranslateX=this.state.translateX;let e=this.loop&&0===u(this.photoSelector(t+1)).length?0:t+1,s=this.loop&&0===u(this.photoSelector(t-1)).length?this.photosLength-1:t-1;this.state.translateX<=0?this.photo([e]).setTransform([{translateX:this.properties.photosGap}]):this.photo([s]).setTransform([{translateX:-1*this.properties.photosGap}]),this.photo([t]).setTransform([{translateX:0}])}this.state.draggingY=!1,this.state.draggingX=!1}}}zoom(t){return t=parseInt(t,10)||parseInt(u(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10),u(`${this.photosSelector}.active > img`).css({transitionDuration:`${this.properties.zoomTransitionDuration}ms`}),timeoutCustom("clear","vg-slider-transition"),timeoutCustom("set","vg-slider-transition",this.properties.zoomTransitionDuration,()=>{u(`${this.photosSelector}.active > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`})}),this.state.zoom?u(`${this.photosSelector} > img`).css({transitionTimingFunction:`${s.ease}`}):void 0!==s[this.properties.photosEasing]?u(`${this.photosSelector} > img`).css({transitionTimingFunction:`${s[this.properties.photosEasing]}`}):u(`${this.photosSelector} > img`).css({transitionTimingFunction:`${s.ease}`}),this.state.zoom?!0===this.properties.photoIndicator&&u(`${this.selector} [data-vinze-photo-indicator]`).addClass("hide"):!0===this.properties.photoIndicator&&u(`${this.selector} [data-vinze-photo-indicator]`).removeClass("hide"),{once:()=>{this.state.zoom?this.photo([t]).setTransform([{translateX:0,translateY:0,scale:1}]):this.photo([t]).setTransform([{translateX:0,translateY:0,scale:this.photo([t]).minScale()}]),this.state.zoom=!this.state.zoom},scroll:e=>{switch(e){case"zoom":this.state.scale+this.properties.zoomSpeed<this.photo([t]).minScale()?this.photo([t]).setTransform([{scale:this.photo([t]).minScale()}]):this.state.scale+this.properties.zoomSpeed<this.properties.zoomMaxScale*this.photo([t]).minScale()?this.photo([t]).setTransform([{scale:this.state.scale+this.properties.zoomSpeed}]):this.photo([t]).setTransform([{scale:this.properties.zoomMaxScale*this.photo([t]).minScale()}]),this.state.zoom=!0;break;case"unzoom":this.state.scale>1?this.photo([t]).setTransform([{scale:this.state.scale-this.properties.zoomSpeed}]):this.photo([t]).setTransform([{scale:1}]),this.state.scale<=this.photo([t]).minScale()&&(timeoutCustom("clear","vg-fix-zoom-position"),this.state.previousTranslateX=0,this.state.previousTranslateY=0,this.photo([t]).setTransform([{translateX:0,translateY:0}])),this.state.scale<this.photo([t]).minScale()?(timeoutCustom("clear","vg-fix-zoom-position"),this.photo([t]).setTransform([{scale:1}]),this.state.zoom=!1):this.state.scale===this.photo([t]).minScale()?this.state.zoom=!0:(this.state.zoom=!0,timeoutCustom("clear","vg-fix-zoom-position"),this.state.zoom&&timeoutCustom("set","vg-fix-zoom-position",1.2*this.properties.zoomTransitionDuration,()=>{this.photo([t]).fixPosition()}));break;default:return}}}}}const r=new Array;let h=null;for(let t=0;t<=u(`[${o.gallery.data}]`).length-1;t++)r[t]=new i(t),r[t].setLayout(),r[t].loadPhotos()})}};