/* vinzeGallery v1.0 */
/* created by Patryk Surmacz */
/* github.com/vinze-ps */

const mobileDevice=()=>!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),timeouts=new Array,timeoutCustom=(t,e=!1,s=0,o=!1)=>{switch(t){case"set":let i;if(timeouts.length>0)for(let t=0;t<=timeouts.length-1;t++){if(-1!==(i=timeouts[t].indexOf(e)))return timeouts[t][1]=setTimeout(()=>{o()},s),-1;if(-1===i&&t===timeouts.length-1)return timeouts.push([e,setTimeout(()=>{o()},s)]),-1}else timeouts.push([e,setTimeout(()=>{o()},s)]);break;case"clear":for(let t=0;t<=timeouts.length-1;t++)if(timeouts[t][0]===e)return clearTimeout(timeouts[t][1]),-1;break;case"clearAll":for(let t=0;t<=timeouts.length-1;t++)clearTimeout(timeouts[t][1]);break;default:return-1}},intervals=new Array,intervalCustom=(t,e=!1,s=0,o=!1)=>{switch(t){case"set":let i;if(intervals.length>0)for(let t=0;t<=intervals.length-1;t++){if(-1!==(i=intervals[t].indexOf(e)))return intervals[t][1]=setInterval(()=>{o()},s),-1;if(-1===i&&t===intervals.length-1)return intervals.push([e,setInterval(()=>{o()},s)]),-1}else intervals.push([e,setInterval(()=>{o()},s)]);break;case"clear":for(let t=0;t<=intervals.length-1;t++)if(intervals[t][0]===e)return clearInterval(intervals[t][1]),-1;break;case"clearAll":for(let t=0;t<=intervals.length-1;t++)clearInterval(intervals[t][1]);break;default:return-1}},vinzeGallery={init:function(t={}){timeoutCustom("set","vg-slider-load",1,()=>{const e={mobileWidthBreakpoint:500,gallery:{data:"data-vinze-gallery",smoothLoad:!0,smoothLoadSpeed:50,photosContainerData:"data-vinze-photo-container",photosData:"data-vinze-photo",photosTransitionDuration:300,photosEasing:"easeOutSine",photosHover:"zoomIn",layout:{xl:!1,lg:3,md:4,sm:!1,xs:6}},slider:{data:"data-vinze-slider",transitionDuration:300,navButtons:"desktop",escButton:!0,navTouch:!0,closeViaDrag:!0,mouseWheel:"zoom",photosIndicator:"desktop",photosEasing:"easeOutSine",photosGap:15,photosTransitionDuration:300,zoomTransitionDuration:200,zoomMaxScale:3,zoomSpeed:.25,loop:!0,draggingXBreakpoint:15,draggingYBreakpoint:15}},s={linear:"cubic-bezier(0, 0, 1, 1)",ease:"cubic-bezier(0.25, 0.1, 0.25, 1)",easeIn:"cubic-bezier(0.42, 0, 1, 1)",easeOut:"cubic-bezier(0, 0, 0.58, 1)",easeInOut:"cubic-bezier(0.42, 0, 0.58, 1)",easeInQuad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",easeInCubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",easeInQuart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",easeInExpo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",easeInCirc:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeOutQuad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",easeOutCubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",easeOutQuart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",easeOutExpo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",easeOutCirc:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.320, 1.275)",easeInOutQuad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",easeInOutCubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",easeInOutQuart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",easeInOutExpo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",easeInOutCirc:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"};let o=function t(e,...s){return s.forEach(s=>{Object.keys(s).forEach(o=>{const i=s[o],r=e[o];e[o]=r&&i&&"object"==typeof r&&"object"==typeof i?t(r,i):i})}),e}(Object.create({}),JSON.parse(JSON.stringify(e)),t),i=new Array;function r(t){if(!(this instanceof r))return new r(t);if(t===window||t===document)this.el=[t];else if("string"==typeof t&&t.includes(":eq")){let e=[t];for(;-1!==e[e.length-1].search(":eq");){let t=e[e.length-1].search(":eq"),s=e[e.length-1].slice(t+7,e[e.length-1].length);e.push(s)}let s=null;for(let t=0;t<=e.length-1;t++)if(""!==e[t-1]&&void 0!==e[t-1]){let o=e[t-1].search(":eq"),i=e[t].search(":eq"),a=e[t-1][o+4],h=e[t-1].slice(0,o),l=-1===i?e[t]:e[t].slice(0,i);s=null===s?r(h).eq(a).el:[this.el[a]],""!==e[t]&&void 0!==e[t]?this.el=void 0!==s?s[0].querySelectorAll(l):s:this.el=s}else if(""!==e[t]&&void 0!==e[t]){let s=e[t].search(":eq"),o=e[t][s+4];this.el=r(e[t].slice(0,s)).eq(o).el}}else this.el=document.querySelectorAll(t);return this.length=this.el.length,this}r.prototype={hasClass:function(t){if(t&&this.length>0){for(let e=0;e<=this.length-1;e++)if(!0===this.el[e].classList.contains(t))return!0;return!1}return this.length>0?this.el[0].classList.value.split(" "):void 0},addClass:function(t){if(t&&this.length>0)for(let e=0;e<=this.length-1;e++)this.el[e].classList.add(t);return this},removeClass:function(t){if(t&&this.length>0)for(let e=0;e<=this.length-1;e++)this.el[e].classList.remove(t);return this},attr:function(t,e){if(t&&this.length>0){if(void 0===e)return this.el[0].getAttribute(t);for(let s=0;s<=this.length-1;s++)this.el[s].setAttribute(t,e);return this}},html:function(t){if(this.length>0){if(void 0===t)return this.el[0].innerHTML;for(let e=0;e<=this.length-1;e++)this.el[e].innerHTML=t;return this}},val:function(t){if(this.length>0){if(void 0===t)return this.el[0].value;for(let e=0;e<=this.length-1;e++)this.el[e].value=t;return this}},eq:function(t){return this.length>0&&("number"==typeof t||"string"==typeof t)&&(this.el[t]?this.el=[this.el[t]]:this.el=void 0),this.el&&(this.length=this.el.length),this},on:function(t,e,s=!1){if(t&&e&&this.length>0){let o=t.split(" ");for(let t=0;t<=this.length-1;t++)for(let r=0;r<=o.length-1;r++){let a=!0;for(let h=0;h<=i.length-1;h++)if(-1!==i[h].indexOf(this.el[t])&&i[h][2].toString()===e.toString()&&i[h][3]===s){if(i[h][1].includes(o[r])){a=!1;break}if(!i[h][1].includes(o[r])&&i[h][1].length>0){a=h;break}}!1!==a&&(this.el[t].addEventListener(o[r],e,s),"number"==typeof a?i[a][1].push(o[r]):i.push([this.el[t],[o[r]],e,s]))}}return this},off:function(t,e,s=!1){if(this.length>0)for(let o=0;o<=this.length-1;o++)if(void 0===e){for(let e=i.length-1;e>=0;e--)if(-1!==i[e].indexOf(this.el[o]))if(void 0===t){for(let t=0;t<=i[e][1].length-1;t++)i[e][0].removeEventListener(i[e][1][t],i[e][2],i[e][3]);i.splice(e,1)}else{let s=t.split(" ");for(let t=0;t<=s.length-1;t++)if(-1!==i[e][1].indexOf(s[t])){i[e][0].removeEventListener(s[t],i[e][2],i[e][3]);let o=i[e][1].indexOf(s[t]);i[e][1].splice(o,1)}0===i[e][1].length&&i.splice(e,1)}}else if(void 0!==t){let r=t.split(" ");for(let t=0;t<=r.length-1;t++){this.el[o].removeEventListener(r[t],e,s);for(let a=i.length-1;a>=0;a--){if(i[a][0]===this.el[o]&&-1!==i[a][1].indexOf(r[t])&&i[a][2]===e&&i[a][3]===s){let e=i[a][1].indexOf(r[t]);i[a][1].splice(e,1)}0===i[a][1].length&&i.splice(a,1)}}}return this},width:function(){if(this.length>0){if(this.el[0]===window||this.el[0]===document)return this.el[0].innerWidth;{let t=parseFloat(getComputedStyle(this.el[0]).paddingLeft.replace("px",""))||0+parseFloat(getComputedStyle(this.el[0]).paddingRight.replace("px",""))||0;return this.el[0].offsetWidth-t}}},outerWidth:function(t=!1){if(this.length>0){let e=0;return t&&(e=parseFloat(getComputedStyle(this.el[0]).marginLeft.replace("px",""))||0+parseFloat(getComputedStyle(this.el[0]).marginRight.replace("px",""))||0),this.el[0]===window||this.el[0]===document?this.el[0].innerWidth+e:this.el[0].offsetWidth+e}},height:function(){if(this.length>0){if(this.el[0]===window||this.el[0]===document)return this.el[0].innerHeight;{let t=parseFloat(getComputedStyle(this.el[0]).paddingTop.replace("px",""))||0+parseFloat(getComputedStyle(this.el[0]).paddingBottom.replace("px",""))||0;return this.el[0].offsetHeight-t}}},outerHeight:function(t=!1){if(this.length>0){let e=0;return t&&(e=parseFloat(getComputedStyle(this.el[0]).marginTop.replace("px",""))||0+parseFloat(getComputedStyle(this.el[0]).marginBottom.replace("px",""))||0),this.el[0]===window||this.el[0]===document?this.el[0].innerHeight+e:this.el[0].offsetHeight+e}},prepend:function(t){if(this.length>0){if(void 0===t)return this;for(let e=0;e<=this.length-1;e++){this.el[e].prepend(function(t){return(new DOMParser).parseFromString(t,"text/html").body}(t).children[0])}}return this},append:function(t){if(this.length>0){if(void 0===t)return this;for(let e=0;e<=this.length-1;e++){this.el[e].append(function(t){return(new DOMParser).parseFromString(t,"text/html").body}(t).children[0])}}return this},remove:function(){if(this.length>0)for(let t=0;t<=this.length-1;t++)this.el[t].remove()},css:function(t){if(this.length>0){if(void 0===t)return getComputedStyle(this.el[0]);if("string"==typeof t)return getComputedStyle(this.el[0])[t];if("object"==typeof t)for(let e in t)for(let s=0;s<=this.length-1;s++)this.el[s].style[e]=t[e]}return this},offset:function(){if(this.length>0){let t=0,e=0,s=this.el[0];for(;s.parentElement;)this.tempEl=s,t+=parseFloat(getComputedStyle(s).marginLeft.replace("px",""))||0,t+=s!==this.el[0]&&parseFloat(getComputedStyle(s).borderLeft.replace("px",""))||0,t+=parseFloat(getComputedStyle(s).left.replace("px",""))||0,t+=this.transform("translateX")||0,e+=parseFloat(getComputedStyle(s).marginTop.replace("px",""))||0,e+=s!==this.el[0]&&parseFloat(getComputedStyle(s).borderTop.replace("px",""))||0,e+=parseFloat(getComputedStyle(s).top.replace("px",""))||0,e+=this.transform("translateY")||0,s=s.parentElement;return this.tempEl=void 0,{left:t,top:e}}},position:function(){if(this.length>0){let t=parseFloat(getComputedStyle(this.el[0]).marginLeft.replace("px","")),e=parseFloat(getComputedStyle(this.el[0]).marginTop.replace("px","")),s=this.transform("translateY")||0,o=this.transform("translateX")||0,i=this.transform("scale")||1;return{left:this.el[0].offsetLeft-t+o-(this.outerWidth()*i-this.outerWidth())/2,top:this.el[0].offsetTop-e+s-(this.outerHeight()*i-this.outerHeight())/2}}},transform:function(t){if(this.length>0){let e=getComputedStyle(this.tempEl?this.tempEl:this.el[0]).transform,s=!1;if(void 0===t)return e;switch(-1!==e.search("matrix3d")?(e=e.replace("matrix3d(","").replace(")","").split(","),s=!0):e=e.replace("matrix(","").replace(")","").split(","),t){case"scale":return parseFloat(e[0]);case"translateX":return s?parseFloat(e[12]):parseFloat(e[4]);case"translateY":return s?parseFloat(e[13]):parseFloat(e[5]);default:return}}}};class a{constructor(t){this.galleryId=t,this.selector=`[${o.gallery.data}]:eq(${this.galleryId})`,this.photosSelector=`${this.selector} [${o.gallery.photosData}]`,this.photosContainerSelector=`${this.selector} [${o.gallery.photosContainerData}]`}loadPhotos(){r(this.photosSelector).css({transition:`transform ${o.gallery.photosTransitionDuration}ms`});for(let t=0;t<=r(this.photosSelector).length-1;t++)void 0!==s[o.gallery.photosEasing]?r(`${this.photosSelector}`).css({transitionTimingFunction:`${s[o.gallery.photosEasing]}`}):r(`${this.photosSelector}`).css({transitionTimingFunction:`${s.ease}`}),null===r(this.photosSelector).eq(t).el[0].parentElement.getAttribute(o.gallery.data)&&(r(this.photosSelector).eq(t).el[0].parentElement.style.overflow="hidden"),r(this.photosSelector).eq(t).attr("alt")||r(this.photosSelector).eq(t).attr("alt"," "),r(this.photosSelector).eq(t).on("click",()=>{null!==n&&n.close(),(n=new h).open(t,this.galleryId)}),o.gallery.smoothLoad?(r(this.photosSelector).eq(t).css({transition:`all ${o.gallery.photosTransitionDuration}ms`}),timeoutCustom("set","vg-gallery-photos-load",t*o.gallery.smoothLoadSpeed,()=>{r(this.photosSelector).eq(t).addClass("loaded")})):r(this.photosSelector).eq(t).addClass("loaded")}setAttribute(t,e,s,o){e&&s?r(this.selector).attr(t,s):!e&&o&&r(this.selector).attr(t,val_2)}setLayout(){if(o.gallery.layout){r(this.selector).addClass("row");for(let t=0;t<=r(this.photosContainerSelector).length-1;t++){let e=r(this.photosContainerSelector).eq(t).hasClass();for(let t=e.length-1;t>=0;t--)-1===e[t].search("col-")&&e.splice(t,1);for(let s in o.gallery.layout){let i=!0;for(let t=e.length-1;t>=0;t--)-1!==e[t].search(s)&&(i=!1),"xs"===s&&-1===e[t].search("sm")&&-1===e[t].search("md")&&-1===e[t].search("lg")&&-1===e[t].search("xl")&&(i=!1);i&&"number"==typeof o.gallery.layout[s]&&r(this.photosContainerSelector).eq(t).addClass(`col${"xs"!==s.toString()?"-"+s.toString():""}-${o.gallery.layout[s]}`)}}}}}class h{constructor(){this.state={changing:!1,zoom:!1,touching:!1,draggingY:!1,draggingX:!1,previousTranslateX:0,previousTranslateY:0,translateX:0,translateY:0,scale:1,startDirectionDraggingY:!1,previousDoubleTouchDistance:0,startInsideTop:!0,startInsideRight:!0,startInsideBottom:!0,startInsideLeft:!0}}setDefaultProperties(){this.properties=Object.assign({},o.slider),this.properties.photosTransitionDuration>600&&(this.properties.photosTransitionDuration=600),this.properties.transitionDuration>600&&(this.properties.transitionDuration=600),this.properties.photosGap>300&&(this.properties.photosGap=300),this.properties.zoomTransitionDuration>600&&(this.properties.zoomTransitionDuration=600),this.properties.zoomSpeed<.1&&(this.properties.zoomSpeed=.1);let t=r(window).width()<=o.mobileWidthBreakpoint,e=r(window).width()>o.mobileWidthBreakpoint,s=this.properties.photosIndicator,i=this.properties.navButtons,a=this.properties.navTouch,h=this.properties.escButton,l=this.properties.closeViaDrag,n=this.properties.loop;"boolean"!=typeof s&&(this.properties.photosIndicator=!!("mobile"===s&&t||"desktop"===s&&e)),"boolean"!=typeof i&&(this.properties.navButtons=!!("mobile"===i&&t||"desktop"===i&&e)),"boolean"!=typeof a&&(this.properties.navTouch=!!("mobile"===a&&t||"desktop"===a&&e)),"boolean"!=typeof h&&(this.properties.escButton=!!("mobile"===h&&t||"desktop"===h&&e)),"boolean"!=typeof l&&(this.properties.closeViaDrag=!!("mobile"===l&&t||"desktop"===l&&e)),"boolean"!=typeof n&&(this.properties.loop=!!("mobile"===n&&t||"desktop"===n&&e))}generatePhotos(){let t=new Array;for(let e=0;e<=r(this.galleryPhotos).length-1;e++)"string"!=typeof r(this.galleryPhotos+`:eq(${e})`).attr("data-vinze-slider-src")?t.push(r(this.galleryPhotos+`:eq(${e})`).attr("src")):t.push(r(this.galleryPhotos+`:eq(${e})`).attr("data-vinze-slider-src"));for(let e=0;e<=t.length-1;e++){if(r(this.selector).append(`<div ${o.gallery.photosData}=${e} class="${e===this.galleryPhotoId?"active":""}"><div data-vinze-photo-cover></div><img src="${t[e]}" alt=" " draggable="false" /></div>`),this.properties.navTouch){r(this.photoSelector(e)).on("dblclick",t=>{this.state.changing||this.zoom(e).once(),t.preventDefault()});let t=!1;r(`${this.photoSelector(e)}`).on("mousedown touchstart",s=>{void 0!==s.touches&&(!1===t?(t=e,timeoutCustom("set","vg-double-tap",300,()=>{t=!1})):t===e&&void 0===s.touches[1]&&(timeoutCustom("clear","vg-double-tap"),t=!1,this.state.changing||this.zoom(e).once())),this.state.changing||this.touch().start(e,s),s.preventDefault()}).addClass("touchable"),r(window).on("mouseup touchend",()=>{this.touch().end()})}"zoom"===this.properties.mouseWheel&&r(this.photoSelector(e)).on("mousewheel",t=>{this.state.changing||(t.wheelDelta/120>0?this.zoom(e).scroll("zoom"):this.zoom(e).scroll("unzoom"))})}this.photosLength=r(this.photosSelector).length,this.loop=this.properties.loop&&r(this.photosSelector).length>2,r(this.photoSelector(this.galleryPhotoId-1)).length>0?r(this.photoSelector(this.galleryPhotoId-1)).addClass("previous"):this.loop&&this.galleryPhotoId!==this.photosLength-1&&r(this.photoSelector(this.photosLength-1)).addClass("previous"),r(this.photoSelector(this.galleryPhotoId+1)).length>0?r(this.photoSelector(this.galleryPhotoId+1)).addClass("next"):this.loop&&0!==this.galleryPhotoId&&r(this.photoSelector(0)).addClass("next"),r(`${this.photosSelector}.previous, ${this.photosSelector}.active, ${this.photosSelector}.next, ${this.photosSelector}.previous > img, ${this.photosSelector}.active > img, ${this.photosSelector}.next > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`}),void 0!==s[this.properties.photosEasing]?r(`${this.photosSelector}, ${this.photosSelector} > img`).css({transitionTimingFunction:`${s[this.properties.photosEasing]}`}):r(`${this.photosSelector}, ${this.photosSelector} > img`).css({transitionTimingFunction:`${s.ease}`})}photo(t){let e=r(void 0===t?`${this.photosSelector}.active > img`:`${this.photoSelector(t)} > img`);return{setTransform:(e=[void 0])=>{"number"===t&&(t=[t]);for(let s=0;s<=t.length-1;s++){if(0===r(this.photoSelector(t[s])).length)continue;const o={scale:this.state.scale,translateX:this.state.translateX,translateY:this.state.translateY},i=Object.assign({},o,e[s]);let a=-1;a=!1===t||void 0===t||!1===t[s]||void 0===t[s]?r(`${this.photosSelector} > img`):r(`${this.photoSelector(t[s])} > img`);let h=[void 0!==e[s]&&void 0!==e[s].scale?i.scale:o.scale,void 0!==e[s]&&void 0!==e[s].translateX?i.translateX:o.translateX,void 0!==e[s]&&void 0!==e[s].translateY?i.translateY:o.translateY];a.css({transform:`scale(${h[0]}) translateX(${h[1]}px) translateY(${h[2]}px)`}),r(`${this.photoSelector(t[s])}`).hasClass("active")&&(void 0!==e[s]&&void 0!==e[s].scale&&(this.state.scale=i.scale),void 0!==e[s]&&void 0!==e[s].translateX&&(this.state.translateX=i.translateX),void 0!==e[s]&&void 0!==e[s].translateY&&(this.state.translateY=i.translateY))}},minScale:()=>{let t=r(window).width(),s=r(window).height(),o=e.outerWidth(),i=e.outerHeight();return s-i>t-o?s/i+s/i*.01:t/o+t/o*.01},insideWindow:(t,s=!1)=>{let o=0;switch(t){case"left":return o=e.position().left/this.state.scale,s?o:o>0;case"right":return o=e.position().left+e.outerWidth()*this.state.scale,s?o-r(window).width():o<r(window).width();case"top":return o=e.position().top/this.state.scale,s?o:o>0;case"bottom":return o=e.position().top+e.outerHeight()*this.state.scale,s?o-r(window).height():o<r(window).height();default:return}},fixPosition:()=>{let e=this.photo([t]).insideWindow("left"),s=this.photo([t]).insideWindow("right"),o=this.photo([t]).insideWindow("top"),i=this.photo([t]).insideWindow("bottom");if(e||s){let e=r(`${this.photoSelector(t)} > img`).position().left/this.state.scale;s&&(e+=r(`${this.photoSelector(t)} > img`).outerWidth()-r(window).width()/this.state.scale);let o=r(window).width()/5<=150?r(window).width()/5:150;e>o&&this.state.startInsideLeft>-10?this.change(t).backward():e<-1*o&&this.state.startInsideRight<10&&this.change(t).forward(),this.state.changing||this.photo([t]).setTransform([{translateX:this.state.translateX-e}])}if(o||i){let e=r(`${this.photoSelector(t)} > img`).position().top/this.state.scale;i&&(e+=r(`${this.photoSelector(t)} > img`).outerHeight()-r(window).height()/this.state.scale),this.state.changing||this.photo([t]).setTransform([{translateY:this.state.translateY-e}])}}}}open(t,e){this.setDefaultProperties(),this.galleryId=e,this.galleryPhotoId=t,this.galleryPhotos=`[${o.gallery.data}]:eq(${this.galleryId}) [${o.gallery.photosData}]`,this.selector=`[${this.properties.data}]`,this.photoSelector=(t=>`[${this.properties.data}] [${o.gallery.photosData}="${t}"]`),this.photosSelector=`[${this.properties.data}] [${o.gallery.photosData}]`,r("body").prepend(`<div ${this.properties.data}>${!0===this.properties.escButton?'<button class="close" title="close(esc)"><div class="bar"></div><div class="bar"></div></button>':""}${!0===this.properties.navButtons?'<button class="backward" title="previous"></button><button class="forward" title="next"></button>':""}${!0===this.properties.photosIndicator?"<div data-vinze-photo-indicator>"+(this.galleryPhotoId+1)+" of "+r(this.galleryPhotos).length+"</div>":""}</div></div>`),r(this.selector).addClass("blur"),r(this.selector).css({transitionDuration:`${this.properties.transitionDuration}ms`}),this.generatePhotos(),this.loop||(0===r(this.photoSelector(this.galleryPhotoId+1)).length?r("button.forward").addClass("disable"):r("button.forward").removeClass("disable"),0===r(this.photoSelector(this.galleryPhotoId-1)).length?r("button.backward").addClass("disable"):r("button.backward").removeClass("disable")),!0===this.properties.navButtons&&(r(`${this.selector} > button.forward`).on("click",()=>{this.state.changing||this.change().forward()}),r(`${this.selector} > button.backward`).on("click",()=>{this.state.changing||this.change().backward()})),"navigation"===this.properties.mouseWheel&&r(this.selector).on("mousewheel",t=>{t.wheelDelta/120>0?this.state.changing||this.change().forward():this.state.changing||this.change().backward()}),!0===this.properties.escButton&&r(`${this.selector} > button.close`).on("click",()=>{this.close()}),document.onkeydown=(t=>{("key"in(t=t||window.event)?"Escape"===t.key||"Esc"===t.key:27===t.keyCode)&&this.close()}),timeoutCustom("set","vg-slider-load",1,()=>{r("body").addClass("overflow-hidden"),r(this.selector).addClass("active")}),this.currentWindowWidth=r(window).width(),r(window).on("resize",()=>{const t=()=>{this.currentWindowWidth=r(window).width(),this.setDefaultProperties(),this.close(),timeoutCustom("clear","vg-slider-reload"),timeoutCustom("set","vg-slider-reload",this.properties.transitionDuration,()=>{this.open(this.galleryPhotoId,this.galleryId)})};this.currentWindowWidth>=o.mobileWidthBreakpoint?r(window).width()<=o.mobileWidthBreakpoint&&t():r(window).width()>=o.mobileWidthBreakpoint&&t()})}close(){r(window).off("resize"),this.properties.navTouch&&(r(this.photosSelector).off("mousedown touchstart dblclick"),r(window).off("mouseup touchend touchmove mousemove")),!0===this.properties.navButtons&&r(`${this.selector} > button.forward, ${this.selector} > button.backward`).off("click"),document.onkeydown=null,!0===this.properties.escButton&&r(`${this.selector} > button.close`).off("click"),this.properties.mouseWheel&&(r(this.selector).off("mousewheel"),r(this.photosSelector).off("mousewheel")),r(this.selector).removeClass("active"),timeoutCustom("set","vg-slider-load",this.properties.transitionDuration,()=>{r("body").removeClass("overflow-hidden"),r(this.selector).remove()}),n=null}change(t){t=parseInt(t,10)||parseInt(r(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10);let e=0;const s=(t,e,s)=>{r(this.photoSelector(e)).length>0&&(this.state.zoom=!1,this.state.previousTranslateX=0,this.state.previousTranslateY=0,this.state.changing=!0,timeoutCustom("set","vg-slide-changing",this.properties.photosTransitionDuration,()=>{this.state.changing=!1,r(`${this.photosSelector}.previous, ${this.photosSelector}.active, ${this.photosSelector}.next, ${this.photosSelector}.previous > img, ${this.photosSelector}.active > img, ${this.photosSelector}.next > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`})}),r(`${this.photosSelector}.previous, ${this.photosSelector}.active, ${this.photosSelector}.next, ${this.photosSelector}.previous > img, ${this.photosSelector}.active > img, ${this.photosSelector}.next > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`}),"forward"===s&&(r(`${this.photosSelector}.previous`).css({transitionDuration:"0ms"}),r(this.photoSelector(t)).addClass("previous").removeClass("active"),r(this.photoSelector(e)).addClass("active").removeClass("next"),r(this.photoSelector(t-1)).length>0?r(this.photoSelector(t-1)).removeClass("previous"):r(this.photoSelector(this.photosLength-1)).removeClass("previous"),r(this.photoSelector(e+1)).length>0?r(this.photoSelector(e+1)).addClass("next"):this.loop&&r(this.photoSelector(0)).addClass("next"),r(`${this.photosSelector}.next > img`).css({transitionDuration:"0ms"})),"backward"===s&&(r(`${this.photosSelector}.next`).css({transitionDuration:"0ms"}),r(this.photoSelector(t)).addClass("next").removeClass("active"),r(this.photoSelector(e)).addClass("active").removeClass("previous"),r(this.photoSelector(t+1)).length>0?r(this.photoSelector(t+1)).removeClass("next"):r(this.photoSelector(0)).removeClass("next"),r(this.photoSelector(e-1)).length>0?r(this.photoSelector(e-1)).addClass("previous"):this.loop&&r(this.photoSelector(this.photosLength-1)).addClass("previous"),r(`${this.photosSelector}.previous > img`).css({transitionDuration:"0ms"})),this.photo([r(`${this.photosSelector}.active`).attr(o.gallery.photosData),r(`${this.photosSelector}.previous`).attr(o.gallery.photosData),r(`${this.photosSelector}.next`).attr(o.gallery.photosData)]).setTransform([{translateX:0,translateY:0,scale:1},{translateX:-1*this.properties.photosGap,translateY:0,scale:1},{translateX:this.properties.photosGap,translateY:0,scale:1}]),!0===this.properties.photosIndicator&&r(`${this.selector} [data-vinze-photo-indicator]`).html(`${parseInt(r(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10)+1} of ${this.photosLength}`))};return{forward:()=>{e=t+1,this.loop&&e>this.photosLength-1?e=0:!this.loop&&e>=this.photosLength-1?(r("button.forward").addClass("disable"),this.photosLength-1>0&&r("button.backward").removeClass("disable")):r("button.backward").removeClass("disable"),s(t,e,"forward")},backward:()=>{e=t-1,this.loop&&e<0?e=this.photosLength-1:!this.loop&&e-1<0?(r("button.backward").addClass("disable"),this.photosLength-1>0&&r("button.forward").removeClass("disable")):r("button.forward").removeClass("disable"),s(t,e,"backward")}}}touch(){return{start:(t,e)=>{this.state.startInsideTop=this.photo([t]).insideWindow("top",!0),this.state.startInsideRight=this.photo([t]).insideWindow("right",!0),this.state.startInsideBottom=this.photo([t]).insideWindow("bottom",!0),this.state.startInsideLeft=this.photo([t]).insideWindow("left",!0),this.state.previousTranslateX=this.state.translateX,this.state.previousTranslateY=this.state.translateY,this.state.touching=!0,r(this.selector).css({transitionDuration:"0ms"}),r(this.photoSelector(t)).addClass("touching"),r(window).on("touchmove mousemove",s=>{this.drag().start(t,e,s)}),r("button.backward, button.forward").css({pointerEvents:"none"})},end:t=>{t=t||r(`${this.photosSelector}.active`).attr(o.gallery.photosData),this.state.touching=!1,r(this.selector).css({transitionDuration:`${this.properties.transitionDuration}ms`}),r(this.photosSelector).removeClass("touching"),this.drag().end(t),r(window).off("touchmove mousemove"),r("button.backward, button.forward").css({pointerEvents:"all"})}}}drag(){return{start:(t,e,s)=>{t=parseInt(t,10)||parseInt(r(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10),r(`${this.photosSelector}`).addClass("dragging"),s=s||window.event;let i={x:-1,y:-1},a=e.clientX||e.touches[0].clientX,h=e.clientY||e.touches[0].clientY,l=0,n=0;if(void 0===s.touches?(i.x=s.clientX,i.y=s.clientY):(i.x=s.touches[0].clientX,i.y=s.touches[0].clientY),l=i.x-a,n=i.y-h,s.touches&&s.touches[1]){let e=s.touches[1].clientX,o=s.touches[1].clientY,i=Math.sqrt(Math.pow(e-a,2)+Math.pow(o-h,2));i=Math.round(i)/10,this.properties.zoomSpeed=Math.pow(i,2)/1e4,i>this.state.previousDoubleTouchDistance?this.zoom(t).scroll("zoom"):i<this.state.previousDoubleTouchDistance&&this.zoom(t).scroll("unzoom"),i!==this.state.previousDoubleTouchDistance&&(this.state.previousDoubleTouchDistance=i)}else{!1===this.state.draggingY&&(this.state.zoom||(Math.abs(l)>this.properties.draggingXBreakpoint&&(this.state.draggingX=!0),this.photo([t]).setTransform([{translateX:l,translateY:0}])));let e=this.photo(t).insideWindow("left"),s=this.photo(t).insideWindow("right");if((!this.state.zoom&&!1===this.state.draggingY||this.state.zoom)&&(l<=0&&s?this.state.startInsideRight<10&&(!this.loop||this.loop&&r(this.photoSelector(t+1)).length>0?this.photo([t+1]).setTransform([{translateX:this.properties.photosGap+l,translateY:0,scale:1}]):this.photo([0]).setTransform([{translateX:this.properties.photosGap+l,translateY:0,scale:1}])):l>0&&e&&this.state.startInsideLeft>-10&&(!this.loop||this.loop&&r(this.photoSelector(t-1)).length>0?this.photo([t-1]).setTransform([{translateX:-1*this.properties.photosGap+l,translateY:0,scale:1}]):this.photo([this.photosLength-1]).setTransform([{translateX:-1*this.properties.photosGap+l,translateY:0,scale:1}]))),this.state.zoom)timeoutCustom("clear","vg-fix-zoom-position"),this.state.draggingX=!0,this.state.draggingY=!0,this.photo([t]).setTransform([{translateX:l/this.state.scale+this.state.previousTranslateX,translateY:n/this.state.scale+this.state.previousTranslateY}]);else if((Math.abs(l)<=this.properties.draggingXBreakpoint&&Math.abs(n)>=this.properties.draggingYBreakpoint||!0===this.state.draggingY)&&!0===this.properties.closeViaDrag&&!1===this.state.draggingX){this.state.draggingY=!0,n<=0&&"bottom"!==this.state.startDirectionDraggingY||n>0&&"top"===this.state.startDirectionDraggingY?(n+=this.properties.draggingYBreakpoint,this.state.startDirectionDraggingY="top"):(n>0&&"top"!==this.state.startDirectionDraggingY||n<=0&&"bottom"===this.state.startDirectionDraggingY)&&(n-=this.properties.draggingYBreakpoint,this.state.startDirectionDraggingY="bottom");let e=Math.abs(n)/10;e=(e=e<=99&&e>=10?e.toString():e<10?"0"+e.toString():"99").replace(".","");let s=Math.round(1e4*(1-parseFloat("0."+e)))/1e4;r(this.selector).css({opacity:s}).removeClass("blur"),this.photo([t]).setTransform([{translateX:l,translateY:n,scale:s>=.5?s:.5}])}}},end:t=>{t=parseInt(t,10)||parseInt(r(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10),r(this.photosSelector).removeClass("dragging"),this.state.startDirectionDraggingY=!1;let e=r(window).width()/5<=150?r(window).width()/5:150,s=r(window).width()/5<=150?r(window).width()/5:150;if(this.state.zoom){if(this.state.draggingX||this.state.draggingY){let e=this.photo(t).insideWindow("left"),s=this.photo(t).insideWindow("right");this.photo([t]).fixPosition();let o=this.loop&&0===r(this.photoSelector(t+1)).length?0:t+1,i=this.loop&&0===r(this.photoSelector(t-1)).length?this.photosLength-1:t-1;this.state.changing||(s?this.photo([o]).setTransform([{translateX:this.properties.photosGap,translateY:0,scale:1}]):e&&this.photo([i]).setTransform([{translateX:-1*this.properties.photosGap,translateY:0,scale:1}]))}}else if(this.state.draggingY)this.state.translateY>s||this.state.translateY<-s?(r(this.selector).css({opacity:0}),this.photo([t]).setTransform([{scale:.5}]),this.close()):(this.state.previousTranslateY=this.state.translateY,r(this.selector).css({opacity:1}).addClass("blur"),this.photo([t]).setTransform([{translateX:0,translateY:0,scale:1}]));else if(this.state.translateX>e&&(this.loop||r(this.photoSelector(t-1)).length>0))this.state.previousTranslateX=this.state.translateX,this.change(t).backward();else if(this.state.translateX<-e&&(this.loop||r(this.photoSelector(t+1)).length>0))this.state.previousTranslateX=this.state.translateX,this.change(t).forward();else{this.state.previousTranslateX=this.state.translateX;let e=this.loop&&0===r(this.photoSelector(t+1)).length?0:t+1,s=this.loop&&0===r(this.photoSelector(t-1)).length?this.photosLength-1:t-1;this.state.translateX<=0?this.photo([e]).setTransform([{translateX:this.properties.photosGap}]):this.photo([s]).setTransform([{translateX:-1*this.properties.photosGap}]),this.photo([t]).setTransform([{translateX:0}])}this.state.draggingY=!1,this.state.draggingX=!1}}}zoom(t){return t=parseInt(t,10)||parseInt(r(`${this.photosSelector}.active`).attr(`${o.gallery.photosData}`),10),r(`${this.photosSelector}.active > img`).css({transitionDuration:`${this.properties.zoomTransitionDuration}ms`}),timeoutCustom("clear","vg-slider-transition"),timeoutCustom("set","vg-slider-transition",this.properties.zoomTransitionDuration,()=>{r(`${this.photosSelector}.active > img`).css({transitionDuration:`${this.properties.photosTransitionDuration}ms`})}),this.state.zoom?r(`${this.photosSelector} > img`).css({transitionTimingFunction:`${s.ease}`}):void 0!==s[this.properties.photosEasing]?r(`${this.photosSelector} > img`).css({transitionTimingFunction:`${s[this.properties.photosEasing]}`}):r(`${this.photosSelector} > img`).css({transitionTimingFunction:`${s.ease}`}),this.state.zoom?!0===this.properties.photoIndicator&&r(`${this.selector} [data-vinze-photo-indicator]`).addClass("hide"):!0===this.properties.photoIndicator&&r(`${this.selector} [data-vinze-photo-indicator]`).removeClass("hide"),{once:()=>{this.state.zoom?this.photo([t]).setTransform([{translateX:0,translateY:0,scale:1}]):this.photo([t]).setTransform([{translateX:0,translateY:0,scale:this.photo([t]).minScale()}]),this.state.zoom=!this.state.zoom},scroll:e=>{switch(e){case"zoom":this.state.scale+this.properties.zoomSpeed<this.photo([t]).minScale()?this.photo([t]).setTransform([{scale:this.photo([t]).minScale()}]):this.state.scale+this.properties.zoomSpeed<this.properties.zoomMaxScale*this.photo([t]).minScale()?this.photo([t]).setTransform([{scale:this.state.scale+this.properties.zoomSpeed}]):this.photo([t]).setTransform([{scale:this.properties.zoomMaxScale*this.photo([t]).minScale()}]),this.state.zoom=!0;break;case"unzoom":this.state.scale>1?this.photo([t]).setTransform([{scale:this.state.scale-this.properties.zoomSpeed}]):this.photo([t]).setTransform([{scale:1}]),this.state.scale<=this.photo([t]).minScale()&&(timeoutCustom("clear","vg-fix-zoom-position"),this.state.previousTranslateX=0,this.state.previousTranslateY=0,this.photo([t]).setTransform([{translateX:0,translateY:0}])),this.state.scale<this.photo([t]).minScale()?(timeoutCustom("clear","vg-fix-zoom-position"),this.photo([t]).setTransform([{scale:1}]),this.state.zoom=!1):this.state.scale===this.photo([t]).minScale()?this.state.zoom=!0:(this.state.zoom=!0,timeoutCustom("clear","vg-fix-zoom-position"),this.state.zoom&&timeoutCustom("set","vg-fix-zoom-position",1.2*this.properties.zoomTransitionDuration,()=>{this.photo([t]).fixPosition()}));break;default:return}}}}}const l=new Array;let n=null;for(let t=0;t<=r(`[${o.gallery.data}]`).length-1;t++)l[t]=new a(t),l[t].setLayout(),l[t].loadPhotos()})}};